<!DOCTYPE html>
<html lang="en">
<head>
    <title>Chứng nhận vntop</title>
    <link href="css/main.css" rel="stylesheet">
</head>

<body>
    <div class="pdf_vntop_scroll">
        <div id="pdf_vntop" style="background: url(images/vntop-bg-chung-nhan.png) no-repeat center;background-size: cover;">
            <div class="pdf_vntop-content">
                <div class="pdf_vntop-content-list">
                    <div class="pdf_vntop-content-item">
                        <p>Nhà đầu tư: </p>
                        <h4>MAI QUYỀN VƯƠNG</h4>
                    </div>
                    <div class="pdf_vntop-content-item">
                        <p>Mã cố phiếu:</p>
                        <h4>CCL</h4>
                    </div>
                    <div class="pdf_vntop-content-item">
                        <p>Ngày phát hành:</p>
                        <h4>10/08/1995</h4>
                    </div>
                    <div class="pdf_vntop-content-item">
                        <p>Số tiền:</p>
                        <h4>100.000.000đ</h4>
                    </div>
                    <div class="pdf_vntop-content-item">
                        <p>Số lượng:</p>
                        <h4>108 cổ phiếu</h4>
                    </div>
                    <div class="pdf_vntop-content-item">
                        <p>Giá mua:</p>
                        <h4>925000</h4>
                    </div>
                </div>
            </div>
        </div>
        <div id="box-img-out" style="">
            <div id="img-out"></div>
        </div>
    </div>
    <style>
        body {
            background: #F3FAFE !important;
        }
    </style>
    <button id="downloadPdf">Download</button>
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/html2canvas.min.js"></script>
    <!-- <script src="js/jspdf.min.js"></script> -->
    <script>
        var $btn = document.getElementById('pdf_vntop');
        addEventListener('load', onScreenShotClick);
        function onScreenShotClick(ev){
          html2canvas(document.querySelector("#pdf_vntop")).then(canvas => {
            document.getElementById('img-out').appendChild(canvas)
          });
        }
        document.getElementById("downloadPdf").addEventListener("click", function() {
            console.log(1)
            var getCanvas;
            html2canvas(document.getElementById("pdf_vntop"), 
            {
				allowTaint: true,
				useCORS: true
			}).then(function (canvas) {
                var dataURL = canvas.toDataURL("image/jpeg").replace("image/jpeg", "image/octet-stream");
                var tempLink = document.createElement('a'), e; 
                    tempLink.download = 'untitled.png';
                    if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent)) { //iOS = Iphone, Ipad, etc.
                        alert("Instructions...");
                        tempLink.target = "_blank";
                        tempLink.href = dataURL;
                    } else {
                        tempLink.href = dataURL.replace(/^data[:]image\/png[;]/i, "data:application/download;");//force download
                    }

                if (document.createEvent)                        
                {
                    e = document.createEvent("MouseEvents");
                    e.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
                    tempLink.dispatchEvent(e);
                } else if (tempLink.fireEvent) {
                    tempLink.fireEvent("onclick");
                }
            });
        })
      </script>
</body>
</html>
